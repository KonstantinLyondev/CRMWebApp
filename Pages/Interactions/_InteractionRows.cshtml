@model IEnumerable<CRMWebApp.Pages.Interactions.IndexModel.Row>

@if (!Model.Any())
{
    <tr>
        <td colspan="5" class="text-center text-muted">No interactions found.</td>
    </tr>
}
else
{
    foreach (var row in Model)
    {
        var item = row.Item;
        <tr>
            <td>@item.Date.ToString("yyyy-MM-dd")</td>
            <td>@(string.IsNullOrWhiteSpace(item.Type) ? "—" : item.Type)</td>
            <td>@(string.IsNullOrWhiteSpace(item.Comment) ? "No comment" : item.Comment)</td>
            <td>@(item.Client?.Name ?? $"Client #{item.ClientId}")</td>
            <td class="text-end actions-col">
                <div class="d-flex gap-1 flex-nowrap justify-content-end">
                    @* Edit *@
                    @if (row.CanEdit)
                    {
                        <a asp-page="Edit" asp-route-id="@item.Id"
                           class="btn btn-sm btn-edit text-nowrap">Edit</a>
                    }
                    else
                    {
                        <a role="button"
                           class="btn btn-sm btn-edit text-nowrap disabled"
                           aria-disabled="true" tabindex="-1" style="pointer-events:none">Edit</a>
                    }

                    <a asp-page="Details" asp-route-id="@item.Id"
                       class="btn btn-sm btn-details text-nowrap">Details</a>

                    @if (row.CanDelete)
                    {
                        <a asp-page="Delete" asp-route-id="@item.Id"
                           class="btn btn-sm btn-delete text-nowrap">Delete</a>
                    }
                    else
                    {
                        <a role="button"
                           class="btn btn-sm btn-delete text-nowrap disabled"
                           aria-disabled="true" tabindex="-1" style="pointer-events:none">Delete</a>
                    }
                </div>
            </td>
        </tr>
    }
}